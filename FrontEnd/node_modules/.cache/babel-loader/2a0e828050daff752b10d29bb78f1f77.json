{"ast":null,"code":"var _jsxFileName = \"/Users/meetjain/Desktop/SIH-Project/FrontEnd/src/components/Login/Login.js\",\n    _s2 = $RefreshSig$();\n\nimport useInput from \"../../hooks/useInput\";\nimport { useRequest } from \"../../hooks/request-hook\";\nimport ErrorModal from \"../../Design/UIElements/ErrorModal\";\nimport { AuthContext } from \"../../context/authcontext\";\nimport { useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst isEmail = value => value.includes(\"@\");\n\nconst isPassword = value => value.trim().length >= 6;\n\nlet formValid = false;\n\nconst Login = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const auth = useContext(AuthContext);\n  const {\n    isError,\n    sendRequest,\n    clearError\n  } = useRequest();\n  const {\n    value: emailValue,\n    isValid: emailisValid,\n    hasError: emailError,\n    valueChangeHandler: emailChangeHandler,\n    BlurHandler: emailBlurHandler,\n    reset: resetEmail\n  } = useInput(isEmail);\n  const {\n    value: passwordValue,\n    isValid: passwordisValid,\n    hasError: passwordError,\n    valueChangeHandler: passwordChangeHandler,\n    BlurHandler: passwordBlurHandler,\n    reset: resetPassword\n  } = useInput(isPassword);\n  const emailClasses = !emailError ? \"form-control\" : \"form-control-invalid\";\n  const passwordClasses = !passwordError ? \"form-control\" : \"form-control-invalid\";\n\n  if (emailisValid && passwordisValid) {\n    formValid = true;\n  }\n\n  if (!emailisValid || !passwordisValid) {\n    formValid = false;\n  }\n\n  const submitHandler = async event => {\n    _s();\n\n    event.preventDefault();\n\n    if (!formValid) {\n      return;\n    }\n\n    const response = await sendRequest(\"http://localhost:5002/users/login\", \"POST\", JSON.stringify({\n      email: emailValue,\n      password: passwordValue\n    }), {\n      \"Content-Type\": \"application/json\"\n    });\n    const navigate = useNavigate();\n    auth.login(response.user.id);\n    console.log(response);\n    resetEmail();\n    resetPassword();\n  };\n\n  _s(submitHandler, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n    return [useNavigate];\n  });\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModal, {\n      error: isError,\n      onClear: clearError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Login Form\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: emailClasses,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"email\",\n          onChange: emailChangeHandler,\n          onBlur: emailBlurHandler,\n          value: emailValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), emailError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-text\",\n          children: \"Please Enter a valid Email!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: passwordClasses,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"set_password\",\n          onChange: passwordChangeHandler,\n          onBlur: passwordBlurHandler,\n          value: passwordValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), passwordError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-text\",\n          children: \"Password should be atleast 6 characters long!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: !formValid,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s2(Login, \"Xqw1VwR0VkwvZcyhzVWgcFQplas=\", false, function () {\n  return [useRequest, useInput, useInput];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useInput","useRequest","ErrorModal","AuthContext","useContext","useNavigate","isEmail","value","includes","isPassword","trim","length","formValid","Login","auth","isError","sendRequest","clearError","emailValue","isValid","emailisValid","hasError","emailError","valueChangeHandler","emailChangeHandler","BlurHandler","emailBlurHandler","reset","resetEmail","passwordValue","passwordisValid","passwordError","passwordChangeHandler","passwordBlurHandler","resetPassword","emailClasses","passwordClasses","submitHandler","event","preventDefault","response","JSON","stringify","email","password","navigate","login","user","id","console","log"],"sources":["/Users/meetjain/Desktop/SIH-Project/FrontEnd/src/components/Login/Login.js"],"sourcesContent":["import useInput from \"../../hooks/useInput\";\nimport { useRequest } from \"../../hooks/request-hook\";\nimport ErrorModal from \"../../Design/UIElements/ErrorModal\";\nimport { AuthContext } from \"../../context/authcontext\";\nimport { useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nconst isEmail = (value) => value.includes(\"@\");\nconst isPassword = (value) => value.trim().length >= 6;\nlet formValid = false;\nconst Login = () => {\n  const auth = useContext(AuthContext);\n  const { isError, sendRequest, clearError } = useRequest();\n\n  const {\n    value: emailValue,\n    isValid: emailisValid,\n    hasError: emailError,\n    valueChangeHandler: emailChangeHandler,\n    BlurHandler: emailBlurHandler,\n    reset: resetEmail,\n  } = useInput(isEmail);\n\n  const {\n    value: passwordValue,\n    isValid: passwordisValid,\n    hasError: passwordError,\n    valueChangeHandler: passwordChangeHandler,\n    BlurHandler: passwordBlurHandler,\n    reset: resetPassword,\n  } = useInput(isPassword);\n\n  const emailClasses = !emailError ? \"form-control\" : \"form-control-invalid\";\n  const passwordClasses = !passwordError\n    ? \"form-control\"\n    : \"form-control-invalid\";\n\n  if (emailisValid && passwordisValid) {\n    formValid = true;\n  }\n  if (!emailisValid || !passwordisValid) {\n    formValid = false;\n  }\n\n  const submitHandler = async (event) => {\n    event.preventDefault();\n    if (!formValid) {\n      return;\n    }\n    const response = await sendRequest(\n      \"http://localhost:5002/users/login\",\n      \"POST\",\n      JSON.stringify({\n        email: emailValue,\n        password: passwordValue,\n      }),\n      {\n        \"Content-Type\": \"application/json\",\n      }\n    );\n    const navigate = useNavigate();\n    auth.login(response.user.id);\n    console.log(response);\n    resetEmail();\n    resetPassword();\n  };\n  return (\n    <>\n      <ErrorModal error={isError} onClear={clearError} />\n      <form onSubmit={submitHandler}>\n        <div>Login Form</div>\n\n        <div className={emailClasses}>\n          <label htmlFor=\"email\">Email</label>\n          <input\n            type=\"text\"\n            id=\"email\"\n            onChange={emailChangeHandler}\n            onBlur={emailBlurHandler}\n            value={emailValue}\n          />\n\n          {emailError && (\n            <p className=\"error-text\">Please Enter a valid Email!</p>\n          )}\n        </div>\n\n        <div className={passwordClasses}>\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            id=\"set_password\"\n            onChange={passwordChangeHandler}\n            onBlur={passwordBlurHandler}\n            value={passwordValue}\n          />\n\n          {passwordError && (\n            <p className=\"error-text\">\n              Password should be atleast 6 characters long!\n            </p>\n          )}\n        </div>\n\n        <button disabled={!formValid}>Submit</button>\n      </form>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}