{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\OneDrive\\\\Desktop\\\\SIH Project-2\\\\SIH-Project\\\\FrontEnd\\\\src\\\\components\\\\Login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport useInput from \"../../hooks/useInput\";\nimport { useRequest } from \"../../hooks/request-hook\";\nimport ErrorModal from \"../../Design/UIElements/ErrorModal\";\nimport { AuthContext } from \"../../context/authcontext\";\nimport { useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst isEmail = value => value.includes(\"@\");\n\nconst isPassword = value => value.trim().length >= 6;\n\nlet formValid = false;\n\nconst Login = () => {\n  _s();\n\n  const auth = useContext(AuthContext);\n  const {\n    isError,\n    sendRequest,\n    clearError\n  } = useRequest();\n  const {\n    value: emailValue,\n    isValid: emailisValid,\n    hasError: emailError,\n    valueChangeHandler: emailChangeHandler,\n    BlurHandler: emailBlurHandler,\n    reset: resetEmail\n  } = useInput(isEmail);\n  const {\n    value: passwordValue,\n    isValid: passwordisValid,\n    hasError: passwordError,\n    valueChangeHandler: passwordChangeHandler,\n    BlurHandler: passwordBlurHandler,\n    reset: resetPassword\n  } = useInput(isPassword);\n  const emailClasses = !emailError ? \"form-control\" : \"form-control-invalid\";\n  const passwordClasses = !passwordError ? \"form-control\" : \"form-control-invalid\";\n\n  if (emailisValid && passwordisValid) {\n    formValid = true;\n  }\n\n  if (!emailisValid || !passwordisValid) {\n    formValid = false;\n  }\n\n  const navigate = useNavigate();\n\n  const submitHandler = async event => {\n    event.preventDefault();\n\n    if (!formValid) {\n      return;\n    }\n\n    const response = await sendRequest(\"http://localhost:5002/users/login\", \"POST\", JSON.stringify({\n      email: emailValue,\n      password: passwordValue\n    }), {\n      \"Content-Type\": \"application/json\"\n    });\n    navigate(\"/landingpage\");\n    auth.login(response.user.id);\n    console.log(response);\n    resetEmail();\n    resetPassword();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModal, {\n      error: isError,\n      onClear: clearError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Login Form\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: emailClasses,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"email\",\n          onChange: emailChangeHandler,\n          onBlur: emailBlurHandler,\n          value: emailValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), emailError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-text\",\n          children: \"Please Enter a valid Email!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: passwordClasses,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"set_password\",\n          onChange: passwordChangeHandler,\n          onBlur: passwordBlurHandler,\n          value: passwordValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), passwordError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-text\",\n          children: \"Password should be atleast 6 characters long!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: !formValid,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"TXqSCQDO5rPfyJE5Bbfak5B1xZY=\", false, function () {\n  return [useRequest, useInput, useInput, useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useInput","useRequest","ErrorModal","AuthContext","useContext","useNavigate","isEmail","value","includes","isPassword","trim","length","formValid","Login","auth","isError","sendRequest","clearError","emailValue","isValid","emailisValid","hasError","emailError","valueChangeHandler","emailChangeHandler","BlurHandler","emailBlurHandler","reset","resetEmail","passwordValue","passwordisValid","passwordError","passwordChangeHandler","passwordBlurHandler","resetPassword","emailClasses","passwordClasses","navigate","submitHandler","event","preventDefault","response","JSON","stringify","email","password","login","user","id","console","log"],"sources":["C:/Users/pc/OneDrive/Desktop/SIH Project-2/SIH-Project/FrontEnd/src/components/Login/Login.js"],"sourcesContent":["import useInput from \"../../hooks/useInput\";\r\nimport { useRequest } from \"../../hooks/request-hook\";\r\nimport ErrorModal from \"../../Design/UIElements/ErrorModal\";\r\nimport { AuthContext } from \"../../context/authcontext\";\r\nimport { useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst isEmail = (value) => value.includes(\"@\");\r\nconst isPassword = (value) => value.trim().length >= 6;\r\nlet formValid = false;\r\nconst Login = () => {\r\n  const auth = useContext(AuthContext);\r\n  const { isError, sendRequest, clearError } = useRequest();\r\n\r\n  const {\r\n    value: emailValue,\r\n    isValid: emailisValid,\r\n    hasError: emailError,\r\n    valueChangeHandler: emailChangeHandler,\r\n    BlurHandler: emailBlurHandler,\r\n    reset: resetEmail,\r\n  } = useInput(isEmail);\r\n\r\n  const {\r\n    value: passwordValue,\r\n    isValid: passwordisValid,\r\n    hasError: passwordError,\r\n    valueChangeHandler: passwordChangeHandler,\r\n    BlurHandler: passwordBlurHandler,\r\n    reset: resetPassword,\r\n  } = useInput(isPassword);\r\n\r\n  const emailClasses = !emailError ? \"form-control\" : \"form-control-invalid\";\r\n  const passwordClasses = !passwordError\r\n    ? \"form-control\"\r\n    : \"form-control-invalid\";\r\n\r\n  if (emailisValid && passwordisValid) {\r\n    formValid = true;\r\n  }\r\n  if (!emailisValid || !passwordisValid) {\r\n    formValid = false;\r\n  }\r\n  const navigate = useNavigate();\r\n  const submitHandler = async (event) => {\r\n    event.preventDefault();\r\n    if (!formValid) {\r\n      return;\r\n    }\r\n    const response = await sendRequest(\r\n      \"http://localhost:5002/users/login\",\r\n      \"POST\",\r\n      JSON.stringify({\r\n        email: emailValue,\r\n        password: passwordValue,\r\n      }),\r\n      {\r\n        \"Content-Type\": \"application/json\",\r\n      }\r\n    );\r\n\r\n    navigate(\"/landingpage\");\r\n    auth.login(response.user.id);\r\n    console.log(response);\r\n    resetEmail();\r\n    resetPassword();\r\n  };\r\n  return (\r\n    <>\r\n      <ErrorModal error={isError} onClear={clearError} />\r\n      <form onSubmit={submitHandler}>\r\n        <div>Login Form</div>\r\n\r\n        <div className={emailClasses}>\r\n          <label htmlFor=\"email\">Email</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"email\"\r\n            onChange={emailChangeHandler}\r\n            onBlur={emailBlurHandler}\r\n            value={emailValue}\r\n          />\r\n\r\n          {emailError && (\r\n            <p className=\"error-text\">Please Enter a valid Email!</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className={passwordClasses}>\r\n          <label htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"set_password\"\r\n            onChange={passwordChangeHandler}\r\n            onBlur={passwordBlurHandler}\r\n            value={passwordValue}\r\n          />\r\n\r\n          {passwordError && (\r\n            <p className=\"error-text\">\r\n              Password should be atleast 6 characters long!\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        <button disabled={!formValid}>Submit</button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}